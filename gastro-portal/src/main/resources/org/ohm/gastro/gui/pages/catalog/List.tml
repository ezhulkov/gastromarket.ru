<t:htmlLayout xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd" floatingHeader="true">

    <div class="catalog">
        <div class="container">
            <div class="title">
                <h1><span>${category?.name}</span></h1>
            </div>

            <div id="product-items" style="border: 1px solid black;"/>

            <t:zone t:id="productsZone">
                <t:delegate to="productsBlock"/>
            </t:zone>

            <t:block t:id="productsBlock">
                <t:loop source="products" value="oneProduct">
                    <div class="product-item">
                        ${oneProduct}
                    </div>
                </t:loop>
                <t:actionlink t:id="fetchProducts" t:context="${lastIndex}" t:zone="productsZone">Загрузить далее</t:actionlink>
            </t:block>
            <!--<a href="#" onclick="javascript:triggerEvent(jQuery('a[id^=nextTexts]').get(0),'click')">NEXT!!!</a>-->

            <script>
                initProductCatalog(jQuery("#productsZone").get(0));
            </script>

        </div>
    </div>

</t:htmlLayout>
